var pageSize=5;
$(function(){function a(a){var c=$(this),f=c.attr("id"),g=c.attr("data-link"),e=c.closest(".name").text().trim();$.ajax({url:" /api/shortlist/"+f,type:"delete",beforeSend:function(b){b.setRequestHeader("Content-Type","application/json")},error:function(b){401===b.status?window.location.href="/login/?redirectTo=/profile/"+g:alert(b.responseJSON.message)},success:function(b){b=c.parent();c.remove();var a=$('<button id="'+f+'" data-link="'+g+'" data-toggle="tooltip" data-placement="top" title="Add to my Contact list" class="btn btn-primary btn-plus"><i class="fa fa-user-plus" aria-hidden="true"></i></button>');b.append(a);
a.click(d);$(".shortlist").addClass("d-none");$("#profilepagetags").attr("shortlistId","");$("#profilepagenote").attr("shortlistId","");swal("",e+" removed from leads","warning")}})}function d(d){var c=$(this),f=c.attr("id"),e=c.attr("data-link"),h=c.closest(".name").text().trim();$.ajax({url:"/api/shortlist/maskedshortlist",type:"post",dataType:"json",data:JSON.stringify({profileId:f,profileLink:e}),beforeSend:function(b){b.setRequestHeader("Content-Type","application/json")},error:function(b){401===
b.status?window.location.href="/login/?redirectTo=/profile/"+e:alert(b.responseJSON.message)},success:function(b){if(b.message&&""!==b.message.heading)$("#messageModal").modal(),$("#messageModalHeader").html(b.message.heading),$("#messageModalBody").html(b.message.body),$("#messageModalRedirectTo").attr("href",b.message.redirectTo),$("#messageModalRedirectTo").html(b.message.redirectText);else{b=c.parent();c.remove();var d=$('<button id="'+f+'" data-link="'+e+'" data-toggle="tooltip" data-placement="top" title="Remove from my Contact list" class="btn btn-primary btn-minus"><i class="fa fa-user-times" aria-hidden="true"></i></button>');
b.append(d);d.click(a);swal("",h+" added to leads","info")}}})}$(".btn-plus").click(d);$(".btn-minus").click(a)});
$("#seemore").on("click",function(){var a=$(this),d=$(".cssload-container");a.hide();d.show();var e=$("#seemore").attr("page"),c=window.location.href.split("?");c=c[1];-1===c.indexOf("page")?c=c+"&source=ajax&page="+e:c.replace("page="+(e-1),"page="+e);$.ajax({url:"/search?"+c,method:"GET",beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},complete:function(){a.show();d.hide()},success:function(a){a.profiles.length<pageSize?$("#seemore").addClass("hidden"):$("#seemore").removeClass("hidden");
bindData(a);$("#seemore").attr("page",parseInt(e)+1)},error:function(a){swal("",a.responseJSON.message,"error")}})});function bindData(a){var d=$("#pageBind").html();a=_.template(d)({data:a});$(".hc-profiles").append(a)}
function analytics(){$.ajax({url:"/api/analytics/",type:"post",dataType:"json",data:JSON.stringify({event:"pageview",page:"search",fullPath:window.location.href}),beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},error:function(a){console.log(a)},success:function(a){console.log(a)}})}$(document).ready(function(){});
