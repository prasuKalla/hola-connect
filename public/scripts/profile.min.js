var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,f,d){b instanceof String&&(b=String(b));for(var e=b.length,g=0;g<e;g++){var h=b[g];if(f.call(d,h,g,b))return{i:g,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,d){b!=Array.prototype&&b!=Object.prototype&&(b[f]=d.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,f,d,e){if(f){d=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var g=b[e];g in d||(d[g]={});d=d[g]}b=b[b.length-1];e=d[b];f=f(e);f!=e&&null!=f&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6","es3");
(function(){function b(){$.ajax({url:"/auth/profile",method:"GET",success:function(b){$("#userName").html("Welcome "+b.userName);$("#creditLeft").html(b.creditLeft);$("#userLoggedIn").removeClass("d-none");$("#userLoggedOut").addClass("d-none");b.extensionEnabled&&$(".holaExtension").css("display","none")},error:function(b){console.error(b);$("#userLoggedIn").addClass("d-none");$("#userLoggedOut").removeClass("d-none")}})}function f(){var b=$("#profileId").attr("val"),a=$("#profile-name").html(),
k=$("#profile-work").html(),c=$("#currentLocation").html();$.ajax({url:"/api/profile/similarProfiles",method:"POST",data:{profileId:b,fullName:a,work:k,currentLocation:c},success:function(c){var a=$("#similarProfilesScript").html();c=_.template(a)({data:c});$(".similarProfiles").html(c)},error:function(c){}})}function d(){var b=$(".cssload-container");b.show();var a=$("#profileId").attr("val");$.ajax({url:"/api/profile/predicted/"+a,type:"get",dataType:"json",beforeSend:function(a){a.setRequestHeader("Content-Type",
"application/json")},error:function(a){alert(a.responseJSON.message)},complete:function(){b.hide()},success:function(a){$("#predictedInfo").remove();var c="";a.reconcile.email&&0<a.reconcile.email.length&&(c=a.reconcile.email.join(", "));$("#predictedEmail").html(c||"NA");c="";a.reconcile.contact&&0<a.reconcile.contact.length&&(c=a.reconcile.contact.join(", "));$("#predictedContact").html(c||"NA")}})}function e(){var b=$(".cssload-container");b.show();var a=window.location.href.replace("?","/").split("/"),
k=a.indexOf("profile");a=a[k+1];$.ajax({url:"/api/shortlist/updateshortlist",type:"post",dataType:"json",data:JSON.stringify({holasearchlink:a}),beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},error:function(c){401===c.status?window.location.href="/login/?redirectTo=/profile/"+a:402===c.status?(console.log(c.responseJSON),$("#messageModal").modal(),$("#messageModalHeader").html(c.responseJSON.heading),$("#messageModalBody").html(c.responseJSON.body),$("#messageModalRedirectTo").attr("href",
c.responseJSON.redirectTo),$("#messageModalRedirectTo").html(c.responseJSON.redirectText)):c.responseJSON?alert(c.responseJSON.message):alert("Something went wrong")},complete:function(){b.hide()},success:function(a){$("#getInfo").remove();$("#predictedInfo-btn").removeClass("hidden");a.shortlist&&($(".shortlist").removeClass("d-none"),$("#profilepagetags").attr("shortlistId",a.shortlist._id),$("#profilepagenote").attr("shortlistId",a.shortlist._id));var b="";a.profile.email&&0<a.profile.email.length&&
(b=a.profile.email.join(", "));$("#email").html(b||"NA");b="";a.profile.contact&&0<a.profile.contact.length&&(b=a.profile.contact.join(", "));$("#contact").html(b||"NA");$("#creditLeft").text(a.account.creditLeft);for(property in a.profile.socialLinks)b="#socialLink"+property,$(b).attr("href",a.profile.socialLinks[property]),$(b).attr("onclick","javascript:void(0)");$("#socialLinksModal").modal("hide");a.message&&""!==a.message.heading&&($("#messageModal").modal(),$("#messageModalHeader").html(a.message.heading),
$("#messageModalBody").html(a.message.body),$("#messageModalRedirectTo").attr("href",a.message.redirectTo),$("#messageModalRedirectTo").html(a.message.redirectText))}})}function g(){var b=$("#profileId").attr("val");$.ajax({url:"/api/shortlist/"+b,type:"get",dataType:"json",beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},error:function(a){404!==a.status?console.log(a.message):console.log(a.responseJSON.message)},success:function(a){$(".shortlist").removeClass("d-none");
$("#profilepagetags").attr("shortlistId",a._id);$("#profilepagenote").attr("shortlistId",a._id);for(var b in a.tags)a.tags[b].trim()&&(l.addOption({value:a.tags[b],text:a.tags[b]}),l.addItem(a.tags[b],!0));$("#profilepagenote").html(a.note);l.refreshItems();2===a.visibility&&e();if(0<a.visibility){a=$("#shortlist-btn");b=a.find(".btn-plus");var c=b.attr("id"),d=b.attr("link");a.append('<button id="'+c+'" data-link="'+d+'" data-toggle="tooltip" data-placement="top" title="Remove from my Contact list" class="btn btn-primary btn-minus"><i class="fa fa-user-times" aria-hidden="true"></i></button>');
b.remove()}h()}})}function h(){$(".btn-plus").click(function(b){var a=$(this),d=a.attr("id"),c=a.attr("data-link"),e=$(".profile-sample-info").find("span#profile-name").text().trim();$.ajax({url:"/api/shortlist/maskedshortlist",type:"post",dataType:"json",data:JSON.stringify({profileId:d,profileLink:c}),beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},error:function(a){401===a.status?window.location.href="/login/?redirectTo=/profile/"+c:alert(a.responseJSON.message)},
success:function(b){if(b.message&&""!==b.message.heading)$("#messageModal").modal(),$("#messageModalHeader").html(b.message.heading),$("#messageModalBody").html(b.message.body),$("#messageModalRedirectTo").attr("href",b.message.redirectTo),$("#messageModalRedirectTo").html(b.message.redirectText);else{var k=a.parent();a.remove();k.append('<button id="'+d+'" data-link="'+c+'" data-toggle="tooltip" data-placement="top" title="Remove from my Contact list" class="btn btn-primary btn-minus"><i class="fa fa-user-times" aria-hidden="true"></i></button>');
$(".shortlist").removeClass("d-none");$("#profilepagetags").attr("shortlistId",b._id);$("#profilepagenote").attr("shortlistId",b._id);swal("",e+" added to leads","info");h()}}})});$(".btn-minus").click(function(b){var a=$(this);b=a.attr("id");var d=a.attr("data-link"),c=$(".profile-sample-info").find("span#profile-name").text().trim();$.ajax({url:" /api/shortlist/"+b,type:"delete",beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},error:function(a){401===a.status?window.location.href=
"/login/?redirectTo=/profile/"+d:alert(a.responseJSON.message)},success:function(b){b=a.parent();a.remove();var e=$("#profileId").attr("val");b.append('<button id="'+e+'" data-link="'+d+'" data-toggle="tooltip" data-placement="top" title="Add to my Contact list" class="btn btn-primary btn-plus"><i class="fa fa-user-plus" aria-hidden="true"></i></button>');$(".shortlist").addClass("d-none");$("#profilepagetags").attr("shortlistId","");$("#profilepagenote").attr("shortlistId","");swal("",c+" removed from leads",
"warning");h()}})});$("#socialLinksGetInfo").click(function(b){e()})}var l;$(document).ready(function(){l=$("#profilepagetags").selectize({plugins:["remove_button"],delimiter:",",persist:!1,create:function(b){return{value:b,text:b}}})[0].selectize;$("#getInfo-btn").click(e);$("#predictedInfo-btn").click(d);h();g();f();b()});$("#profilepagenote").on("change",function(){var b=$("#profilepagenote").attr("shortlistId"),a={shortlist:{note:$("#profilepagenote").val().trim()}};$.ajax({url:"/api/shortlist/"+
b,type:"put",dataType:"json",data:JSON.stringify(a),beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")},error:function(a){alert("Please contact help@holaconnect.com")},success:function(a){}})});$("#profilepagetags").on("change",function(b,a){$(this).val().trim()&&(b=$("#profilepagetags").attr("shortlistId"),a={shortlist:{tags:$(this).val().split(",")}},$.ajax({url:"/api/shortlist/"+b,type:"put",dataType:"json",data:JSON.stringify(a),beforeSend:function(a){a.setRequestHeader("Content-Type",
"application/json")},error:function(a){alert("Please contact help@holaconnect.com")},success:function(a){}}))})})();function socialLinksModal(){$("#socialLinksModal").modal()};
